- Ensuring nas dir...

There is auto config in the service: _FC_NAS_dummy-service-ensure-nas-dir-exist-service

There is auto config in the service: dummy-service

Tips for next step
======================
* Display information of the deployed resource: s info
* Display metrics: s metrics
* Display logs: s logs
* Invoke remote function: s invoke
* Remove Service: s remove service
* Remove Function: s remove function
* Remove Trigger: s remove trigger
* Remove CustomDomain: s remove domain



[2022-04-22 07:55:54] [INFO] [S-CORE] - Start the after-action
[2022-04-22 07:55:54] [INFO] [S-CORE] - Action: /Users/nanxuanli/work/plugin/fc-canary
{
  "endpoint": "1816647648916833.cn-hangzhou.fc.aliyuncs.com",
  "accessKeyId": "LTAI5tG35imRmNd5xbWfZhEM",
  "accessKeySecret": "IhbevfXalCPsdIOgZfEAS5HQ4VMHiu",
  "regionId": "cn-hangzhou"
}
inputs params without credentials: {
  "props": {
    "region": "cn-hangzhou",
    "service": {
      "name": "dummy-service",
      "logConfig": "auto",
      "nasConfig": "auto"
    },
    "function": {
      "handler": "index.handler",
      "instanceType": "e1",
      "memorySize": 1024,
      "runtime": "nodejs12",
      "timeout": 60,
      "name": "dummy-function",
      "codeUri": "."
    },
    "triggers": [
      {
        "name": "httpTrigger",
        "type": "http",
        "config": {
          "authType": "anonymous",
          "methods": [
            "GET"
          ]
        }
      }
    ],
    "customDomains": [
      {
        "domainName": "auto",
        "protocol": "HTTP",
        "routeConfigs": [
          {
            "path": "/*"
          }
        ]
      }
    ]
  },
  "credentials": {
    "Alias": "mac0307",
    "AccessKeyID": "LTAI5tG35imRmNd5xbWfZhEM",
    "AccessKeySecret": "IhbevfXalCPsdIOgZfEAS5HQ4VMHiu",
    "AccountID": "1816647648916833"
  },
  "appName": "demo-app",
  "project": {
    "component": "devsapp/fc",
    "access": "mac0307",
    "projectName": "dummy-function"
  },
  "command": "deploy",
  "args": "-t ./test/singleFunc/grayscale/s-canaryPlan-interval-miss.yaml --use-local",
  "argsObj": [
    "-t",
    "./test/singleFunc/grayscale/s-canaryPlan-interval-miss.yaml",
    "--use-local"
  ],
  "path": {
    "configPath": "/Users/nanxuanli/work/plugin/fc-canary/test/singleFunc/grayscale/s-canaryPlan-interval-miss.yaml"
  },
  "output": {
    "region": "cn-hangzhou",
    "service": {
      "name": "dummy-service"
    },
    "function": {
      "name": "dummy-function",
      "runtime": "nodejs12",
      "handler": "index.handler",
      "memorySize": 1024,
      "timeout": 60
    },
    "url": {
      "custom_domain": [
        {
          "domain": "http://dummy-function.dummy-service.1816647648916833.cn-hangzhou.fc.devsapp.net"
        }
      ]
    },
    "triggers": [
      {
        "type": "http",
        "name": "httpTrigger"
      }
    ]
  }
}
args params: {
  alias: stable;
  canaryPlans: [object Object],[object Object];
}
keys in args: alias,canaryPlans
[ 'canaryPlans' ]
canaryPlans
canaryPlans: [object Object],[object Object]
{ weight: 10, interval: 5 }
{ weight: 10 }
âœ– Message:

ERROR:

Interval is required

TraceId:     acde480011221650614155593
Environment: @serverless-devs/s: 2.0.104, core: 0.1.34, s-home: /Users/nanxuanli/.s, darwin-x64, node-v17.7.1
Documents:   https://www.serverless-devs.com
Discussions: https://github.com/Serverless-Devs/Serverless-Devs/discussions
Issues:      https://github.com/Serverless-Devs/Serverless-Devs/issues

Please copy traceId: acde480011221650614155593 and join Dingding group: 33947367 for consultation.
You can run 's clean --all' to clean Serverless devs.

- Ensuring nas dir...

There is auto config in the service: _FC_NAS_dummy-service-ensure-nas-dir-exist-service

There is auto config in the service: dummy-service

Tips for next step
======================
* Display information of the deployed resource: s info
* Display metrics: s metrics
* Display logs: s logs
* Invoke remote function: s invoke
* Remove Service: s remove service
* Remove Function: s remove function
* Remove Trigger: s remove trigger
* Remove CustomDomain: s remove domain



[2022-04-22 07:56:07] [INFO] [S-CORE] - Start the after-action
[2022-04-22 07:56:07] [INFO] [S-CORE] - Action: /Users/nanxuanli/work/plugin/fc-canary
{
  "endpoint": "1816647648916833.cn-hangzhou.fc.aliyuncs.com",
  "accessKeyId": "LTAI5tG35imRmNd5xbWfZhEM",
  "accessKeySecret": "IhbevfXalCPsdIOgZfEAS5HQ4VMHiu",
  "regionId": "cn-hangzhou"
}
inputs params without credentials: {
  "props": {
    "region": "cn-hangzhou",
    "service": {
      "name": "dummy-service",
      "logConfig": "auto",
      "nasConfig": "auto"
    },
    "function": {
      "handler": "index.handler",
      "instanceType": "e1",
      "memorySize": 1024,
      "runtime": "nodejs12",
      "timeout": 60,
      "name": "dummy-function",
      "codeUri": "."
    },
    "triggers": [
      {
        "name": "httpTrigger",
        "type": "http",
        "config": {
          "authType": "anonymous",
          "methods": [
            "GET"
          ]
        }
      }
    ],
    "customDomains": [
      {
        "domainName": "auto",
        "protocol": "HTTP",
        "routeConfigs": [
          {
            "path": "/*"
          }
        ]
      }
    ]
  },
  "credentials": {
    "Alias": "mac0307",
    "AccessKeyID": "LTAI5tG35imRmNd5xbWfZhEM",
    "AccessKeySecret": "IhbevfXalCPsdIOgZfEAS5HQ4VMHiu",
    "AccountID": "1816647648916833"
  },
  "appName": "demo-app",
  "project": {
    "component": "devsapp/fc",
    "access": "mac0307",
    "projectName": "dummy-function"
  },
  "command": "deploy",
  "args": "-t ./test/singleFunc/grayscale/s-canaryPlan-no-plan.yaml --use-local",
  "argsObj": [
    "-t",
    "./test/singleFunc/grayscale/s-canaryPlan-no-plan.yaml",
    "--use-local"
  ],
  "path": {
    "configPath": "/Users/nanxuanli/work/plugin/fc-canary/test/singleFunc/grayscale/s-canaryPlan-no-plan.yaml"
  },
  "output": {
    "region": "cn-hangzhou",
    "service": {
      "name": "dummy-service"
    },
    "function": {
      "name": "dummy-function",
      "runtime": "nodejs12",
      "handler": "index.handler",
      "memorySize": 1024,
      "timeout": 60
    },
    "url": {
      "custom_domain": [
        {
          "domain": "http://dummy-function.dummy-service.1816647648916833.cn-hangzhou.fc.devsapp.net"
        }
      ]
    },
    "triggers": [
      {
        "type": "http",
        "name": "httpTrigger"
      }
    ]
  }
}
args params: {
  alias: stable;
  canaryPlans: undefined;
}
keys in args: alias,canaryPlans
[ 'canaryPlans' ]
canaryPlans
canaryPlans: undefined
âœ– Message:

ERROR:

canaryPlans' format error, please double check the canaryPlans in the yaml.

TraceId:     acde480011221650614168456
Environment: @serverless-devs/s: 2.0.104, core: 0.1.34, s-home: /Users/nanxuanli/.s, darwin-x64, node-v17.7.1
Documents:   https://www.serverless-devs.com
Discussions: https://github.com/Serverless-Devs/Serverless-Devs/discussions
Issues:      https://github.com/Serverless-Devs/Serverless-Devs/issues

Please copy traceId: acde480011221650614168456 and join Dingding group: 33947367 for consultation.
You can run 's clean --all' to clean Serverless devs.

- Ensuring nas dir...

There is auto config in the service: _FC_NAS_dummy-service-ensure-nas-dir-exist-service

There is auto config in the service: dummy-service

Tips for next step
======================
* Display information of the deployed resource: s info
* Display metrics: s metrics
* Display logs: s logs
* Invoke remote function: s invoke
* Remove Service: s remove service
* Remove Function: s remove function
* Remove Trigger: s remove trigger
* Remove CustomDomain: s remove domain



[2022-04-22 07:56:20] [INFO] [S-CORE] - Start the after-action
[2022-04-22 07:56:20] [INFO] [S-CORE] - Action: /Users/nanxuanli/work/plugin/fc-canary
{
  "endpoint": "1816647648916833.cn-hangzhou.fc.aliyuncs.com",
  "accessKeyId": "LTAI5tG35imRmNd5xbWfZhEM",
  "accessKeySecret": "IhbevfXalCPsdIOgZfEAS5HQ4VMHiu",
  "regionId": "cn-hangzhou"
}
inputs params without credentials: {
  "props": {
    "region": "cn-hangzhou",
    "service": {
      "name": "dummy-service",
      "logConfig": "auto",
      "nasConfig": "auto"
    },
    "function": {
      "handler": "index.handler",
      "instanceType": "e1",
      "memorySize": 1024,
      "runtime": "nodejs12",
      "timeout": 60,
      "name": "dummy-function",
      "codeUri": "."
    },
    "triggers": [
      {
        "name": "httpTrigger",
        "type": "http",
        "config": {
          "authType": "anonymous",
          "methods": [
            "GET"
          ]
        }
      }
    ],
    "customDomains": [
      {
        "domainName": "auto",
        "protocol": "HTTP",
        "routeConfigs": [
          {
            "path": "/*"
          }
        ]
      }
    ]
  },
  "credentials": {
    "Alias": "mac0307",
    "AccessKeyID": "LTAI5tG35imRmNd5xbWfZhEM",
    "AccessKeySecret": "IhbevfXalCPsdIOgZfEAS5HQ4VMHiu",
    "AccountID": "1816647648916833"
  },
  "appName": "demo-app",
  "project": {
    "component": "devsapp/fc",
    "access": "mac0307",
    "projectName": "dummy-function"
  },
  "command": "deploy",
  "args": "-t ./test/singleFunc/grayscale/s-canaryPlan-weight-illegal.yaml --use-local",
  "argsObj": [
    "-t",
    "./test/singleFunc/grayscale/s-canaryPlan-weight-illegal.yaml",
    "--use-local"
  ],
  "path": {
    "configPath": "/Users/nanxuanli/work/plugin/fc-canary/test/singleFunc/grayscale/s-canaryPlan-weight-illegal.yaml"
  },
  "output": {
    "region": "cn-hangzhou",
    "service": {
      "name": "dummy-service"
    },
    "function": {
      "name": "dummy-function",
      "runtime": "nodejs12",
      "handler": "index.handler",
      "memorySize": 1024,
      "timeout": 60
    },
    "url": {
      "custom_domain": [
        {
          "domain": "http://dummy-function.dummy-service.1816647648916833.cn-hangzhou.fc.devsapp.net"
        }
      ]
    },
    "triggers": [
      {
        "type": "http",
        "name": "httpTrigger"
      }
    ]
  }
}
args params: {
  alias: stable;
  canaryPlans: [object Object],[object Object];
}
keys in args: alias,canaryPlans
[ 'canaryPlans' ]
canaryPlans
canaryPlans: [object Object],[object Object]
{ weight: 10, interval: 5 }
{ weight: 110, interval: 10 }
âœ– Message:

ERROR:

Plans in canaryPlans can't have a weight > 100

TraceId:     acde480011221650614180601
Environment: @serverless-devs/s: 2.0.104, core: 0.1.34, s-home: /Users/nanxuanli/.s, darwin-x64, node-v17.7.1
Documents:   https://www.serverless-devs.com
Discussions: https://github.com/Serverless-Devs/Serverless-Devs/discussions
Issues:      https://github.com/Serverless-Devs/Serverless-Devs/issues

Please copy traceId: acde480011221650614180601 and join Dingding group: 33947367 for consultation.
You can run 's clean --all' to clean Serverless devs.

- Ensuring nas dir...

There is auto config in the service: _FC_NAS_dummy-service-ensure-nas-dir-exist-service

There is auto config in the service: dummy-service

Tips for next step
======================
* Display information of the deployed resource: s info
* Display metrics: s metrics
* Display logs: s logs
* Invoke remote function: s invoke
* Remove Service: s remove service
* Remove Function: s remove function
* Remove Trigger: s remove trigger
* Remove CustomDomain: s remove domain



[2022-04-22 07:56:31] [INFO] [S-CORE] - Start the after-action
[2022-04-22 07:56:31] [INFO] [S-CORE] - Action: /Users/nanxuanli/work/plugin/fc-canary
{
  "endpoint": "1816647648916833.cn-hangzhou.fc.aliyuncs.com",
  "accessKeyId": "LTAI5tG35imRmNd5xbWfZhEM",
  "accessKeySecret": "IhbevfXalCPsdIOgZfEAS5HQ4VMHiu",
  "regionId": "cn-hangzhou"
}
inputs params without credentials: {
  "props": {
    "region": "cn-hangzhou",
    "service": {
      "name": "dummy-service",
      "logConfig": "auto",
      "nasConfig": "auto"
    },
    "function": {
      "handler": "index.handler",
      "instanceType": "e1",
      "memorySize": 1024,
      "runtime": "nodejs12",
      "timeout": 60,
      "name": "dummy-function",
      "codeUri": "."
    },
    "triggers": [
      {
        "name": "httpTrigger",
        "type": "http",
        "config": {
          "authType": "anonymous",
          "methods": [
            "GET"
          ]
        }
      }
    ],
    "customDomains": [
      {
        "domainName": "auto",
        "protocol": "HTTP",
        "routeConfigs": [
          {
            "path": "/*"
          }
        ]
      }
    ]
  },
  "credentials": {
    "Alias": "mac0307",
    "AccessKeyID": "LTAI5tG35imRmNd5xbWfZhEM",
    "AccessKeySecret": "IhbevfXalCPsdIOgZfEAS5HQ4VMHiu",
    "AccountID": "1816647648916833"
  },
  "appName": "demo-app",
  "project": {
    "component": "devsapp/fc",
    "access": "mac0307",
    "projectName": "dummy-function"
  },
  "command": "deploy",
  "args": "-t ./test/singleFunc/grayscale/s-canaryPlan-weight-miss.yaml --use-local",
  "argsObj": [
    "-t",
    "./test/singleFunc/grayscale/s-canaryPlan-weight-miss.yaml",
    "--use-local"
  ],
  "path": {
    "configPath": "/Users/nanxuanli/work/plugin/fc-canary/test/singleFunc/grayscale/s-canaryPlan-weight-miss.yaml"
  },
  "output": {
    "region": "cn-hangzhou",
    "service": {
      "name": "dummy-service"
    },
    "function": {
      "name": "dummy-function",
      "runtime": "nodejs12",
      "handler": "index.handler",
      "memorySize": 1024,
      "timeout": 60
    },
    "url": {
      "custom_domain": [
        {
          "domain": "http://dummy-function.dummy-service.1816647648916833.cn-hangzhou.fc.devsapp.net"
        }
      ]
    },
    "triggers": [
      {
        "type": "http",
        "name": "httpTrigger"
      }
    ]
  }
}
args params: {
  alias: stable;
  canaryPlans: [object Object],[object Object];
}
keys in args: alias,canaryPlans
[ 'canaryPlans' ]
canaryPlans
canaryPlans: [object Object],[object Object]
{ weight: 10, interval: 5 }
{ interval: 10 }
âœ– Message:

ERROR:

Weight is required

TraceId:     acde480011221650614192571
Environment: @serverless-devs/s: 2.0.104, core: 0.1.34, s-home: /Users/nanxuanli/.s, darwin-x64, node-v17.7.1
Documents:   https://www.serverless-devs.com
Discussions: https://github.com/Serverless-Devs/Serverless-Devs/discussions
Issues:      https://github.com/Serverless-Devs/Serverless-Devs/issues

Please copy traceId: acde480011221650614192571 and join Dingding group: 33947367 for consultation.
You can run 's clean --all' to clean Serverless devs.

- Ensuring nas dir...

There is auto config in the service: _FC_NAS_dummy-service-ensure-nas-dir-exist-service

There is auto config in the service: dummy-service

Tips for next step
======================
* Display information of the deployed resource: s info
* Display metrics: s metrics
* Display logs: s logs
* Invoke remote function: s invoke
* Remove Service: s remove service
* Remove Function: s remove function
* Remove Trigger: s remove trigger
* Remove CustomDomain: s remove domain



[2022-04-22 07:56:44] [INFO] [S-CORE] - Start the after-action
[2022-04-22 07:56:44] [INFO] [S-CORE] - Action: /Users/nanxuanli/work/plugin/fc-canary
{
  "endpoint": "1816647648916833.cn-hangzhou.fc.aliyuncs.com",
  "accessKeyId": "LTAI5tG35imRmNd5xbWfZhEM",
  "accessKeySecret": "IhbevfXalCPsdIOgZfEAS5HQ4VMHiu",
  "regionId": "cn-hangzhou"
}
inputs params without credentials: {
  "props": {
    "region": "cn-hangzhou",
    "service": {
      "name": "dummy-service",
      "logConfig": "auto",
      "nasConfig": "auto"
    },
    "function": {
      "handler": "index.handler",
      "instanceType": "e1",
      "memorySize": 1024,
      "runtime": "nodejs12",
      "timeout": 60,
      "name": "dummy-function",
      "codeUri": "."
    },
    "triggers": [
      {
        "name": "httpTrigger",
        "type": "http",
        "config": {
          "authType": "anonymous",
          "methods": [
            "GET"
          ]
        }
      }
    ],
    "customDomains": [
      {
        "domainName": "auto",
        "protocol": "HTTP",
        "routeConfigs": [
          {
            "path": "/*"
          }
        ]
      }
    ]
  },
  "credentials": {
    "Alias": "mac0307",
    "AccessKeyID": "LTAI5tG35imRmNd5xbWfZhEM",
    "AccessKeySecret": "IhbevfXalCPsdIOgZfEAS5HQ4VMHiu",
    "AccountID": "1816647648916833"
  },
  "appName": "demo-app",
  "project": {
    "component": "devsapp/fc",
    "access": "mac0307",
    "projectName": "dummy-function"
  },
  "command": "deploy",
  "args": "-t ./test/singleFunc/grayscale/s-canaryStep-interval-undefined.yaml --use-local",
  "argsObj": [
    "-t",
    "./test/singleFunc/grayscale/s-canaryStep-interval-undefined.yaml",
    "--use-local"
  ],
  "path": {
    "configPath": "/Users/nanxuanli/work/plugin/fc-canary/test/singleFunc/grayscale/s-canaryStep-interval-undefined.yaml"
  },
  "output": {
    "region": "cn-hangzhou",
    "service": {
      "name": "dummy-service"
    },
    "function": {
      "name": "dummy-function",
      "runtime": "nodejs12",
      "handler": "index.handler",
      "memorySize": 1024,
      "timeout": 60
    },
    "url": {
      "custom_domain": [
        {
          "domain": "http://dummy-function.dummy-service.1816647648916833.cn-hangzhou.fc.devsapp.net"
        }
      ]
    },
    "triggers": [
      {
        "type": "http",
        "name": "httpTrigger"
      }
    ]
  }
}
args params: {
  alias: stable;
  canaryStep: [object Object];
}
keys in args: alias,canaryStep
[ 'canaryStep' ]
canaryStep
[2022-04-22 07:56:44] [INFO] [S-CORE] - End the after-action
[J[1mdummy-function: [22m
  [1mregion: [22m  cn-hangzhou
  [1mservice: [22m
    [1mname: [22mdummy-service
  [1mfunction: [22m
    [1mname: [22m      dummy-function
    [1mruntime: [22m   nodejs12
    [1mhandler: [22m   index.handler
    [1mmemorySize: [22m[34m1024[39m
    [1mtimeout: [22m   [34m60[39m
  [1murl: [22m
    [1mcustom_domain: [22m
      [32m- [39m
        [1mdomain: [22mhttp://dummy-function.dummy-service.1816647648916833.cn-hangzhou.fc.devsapp.net
  [1mtriggers: [22m
    [32m- [39m
      [1mtype: [22mhttp
      [1mname: [22mhttpTrigger

- Ensuring nas dir...

There is auto config in the service: _FC_NAS_dummy-service-ensure-nas-dir-exist-service

There is auto config in the service: dummy-service

Tips for next step
======================
* Display information of the deployed resource: s info
* Display metrics: s metrics
* Display logs: s logs
* Invoke remote function: s invoke
* Remove Service: s remove service
* Remove Function: s remove function
* Remove Trigger: s remove trigger
* Remove CustomDomain: s remove domain



[2022-04-22 07:56:56] [INFO] [S-CORE] - Start the after-action
[2022-04-22 07:56:56] [INFO] [S-CORE] - Action: /Users/nanxuanli/work/plugin/fc-canary
{
  "endpoint": "1816647648916833.cn-hangzhou.fc.aliyuncs.com",
  "accessKeyId": "LTAI5tG35imRmNd5xbWfZhEM",
  "accessKeySecret": "IhbevfXalCPsdIOgZfEAS5HQ4VMHiu",
  "regionId": "cn-hangzhou"
}
inputs params without credentials: {
  "props": {
    "region": "cn-hangzhou",
    "service": {
      "name": "dummy-service",
      "logConfig": "auto",
      "nasConfig": "auto"
    },
    "function": {
      "handler": "index.handler",
      "instanceType": "e1",
      "memorySize": 1024,
      "runtime": "nodejs12",
      "timeout": 60,
      "name": "dummy-function",
      "codeUri": "."
    },
    "triggers": [
      {
        "name": "httpTrigger",
        "type": "http",
        "config": {
          "authType": "anonymous",
          "methods": [
            "GET"
          ]
        }
      }
    ],
    "customDomains": [
      {
        "domainName": "auto",
        "protocol": "HTTP",
        "routeConfigs": [
          {
            "path": "/*"
          }
        ]
      }
    ]
  },
  "credentials": {
    "Alias": "mac0307",
    "AccessKeyID": "LTAI5tG35imRmNd5xbWfZhEM",
    "AccessKeySecret": "IhbevfXalCPsdIOgZfEAS5HQ4VMHiu",
    "AccountID": "1816647648916833"
  },
  "appName": "demo-app",
  "project": {
    "component": "devsapp/fc",
    "access": "mac0307",
    "projectName": "dummy-function"
  },
  "command": "deploy",
  "args": "-t ./test/singleFunc/grayscale/s-canaryStep-weight-miss.yaml --use-local",
  "argsObj": [
    "-t",
    "./test/singleFunc/grayscale/s-canaryStep-weight-miss.yaml",
    "--use-local"
  ],
  "path": {
    "configPath": "/Users/nanxuanli/work/plugin/fc-canary/test/singleFunc/grayscale/s-canaryStep-weight-miss.yaml"
  },
  "output": {
    "region": "cn-hangzhou",
    "service": {
      "name": "dummy-service"
    },
    "function": {
      "name": "dummy-function",
      "runtime": "nodejs12",
      "handler": "index.handler",
      "memorySize": 1024,
      "timeout": 60
    },
    "url": {
      "custom_domain": [
        {
          "domain": "http://dummy-function.dummy-service.1816647648916833.cn-hangzhou.fc.devsapp.net"
        }
      ]
    },
    "triggers": [
      {
        "type": "http",
        "name": "httpTrigger"
      }
    ]
  }
}
args params: {
  alias: stable;
  canaryStep: [object Object];
}
keys in args: alias,canaryStep
[ 'canaryStep' ]
canaryStep
âœ– Message:

ERROR:

Weight is required, grayscale strategy: canaryStep

TraceId:     acde480011221650614217156
Environment: @serverless-devs/s: 2.0.104, core: 0.1.34, s-home: /Users/nanxuanli/.s, darwin-x64, node-v17.7.1
Documents:   https://www.serverless-devs.com
Discussions: https://github.com/Serverless-Devs/Serverless-Devs/discussions
Issues:      https://github.com/Serverless-Devs/Serverless-Devs/issues

Please copy traceId: acde480011221650614217156 and join Dingding group: 33947367 for consultation.
You can run 's clean --all' to clean Serverless devs.


WARNING:
======================
* Please check if the s.yaml/s.yml file exists, you can also specify it with -t.

Message: the s.yaml/s.yml file was not found.

You can run 's clean --all' to clean Serverless devs.

- Ensuring nas dir...

There is auto config in the service: _FC_NAS_dummy-service-ensure-nas-dir-exist-service

There is auto config in the service: dummy-service

Tips for next step
======================
* Display information of the deployed resource: s info
* Display metrics: s metrics
* Display logs: s logs
* Invoke remote function: s invoke
* Remove Service: s remove service
* Remove Function: s remove function
* Remove Trigger: s remove trigger
* Remove CustomDomain: s remove domain



[2022-04-22 07:57:08] [INFO] [S-CORE] - Start the after-action
[2022-04-22 07:57:08] [INFO] [S-CORE] - Action: /Users/nanxuanli/work/plugin/fc-canary
{
  "endpoint": "1816647648916833.cn-hangzhou.fc.aliyuncs.com",
  "accessKeyId": "LTAI5tG35imRmNd5xbWfZhEM",
  "accessKeySecret": "IhbevfXalCPsdIOgZfEAS5HQ4VMHiu",
  "regionId": "cn-hangzhou"
}
inputs params without credentials: {
  "props": {
    "region": "cn-hangzhou",
    "service": {
      "name": "dummy-service",
      "logConfig": "auto",
      "nasConfig": "auto"
    },
    "function": {
      "handler": "index.handler",
      "instanceType": "e1",
      "memorySize": 1024,
      "runtime": "nodejs12",
      "timeout": 60,
      "name": "dummy-function",
      "codeUri": "."
    },
    "triggers": [
      {
        "name": "httpTrigger",
        "type": "http",
        "config": {
          "authType": "anonymous",
          "methods": [
            "GET"
          ]
        }
      }
    ],
    "customDomains": [
      {
        "domainName": "auto",
        "protocol": "HTTP",
        "routeConfigs": [
          {
            "path": "/*"
          }
        ]
      }
    ]
  },
  "credentials": {
    "Alias": "mac0307",
    "AccessKeyID": "LTAI5tG35imRmNd5xbWfZhEM",
    "AccessKeySecret": "IhbevfXalCPsdIOgZfEAS5HQ4VMHiu",
    "AccountID": "1816647648916833"
  },
  "appName": "demo-app",
  "project": {
    "component": "devsapp/fc",
    "access": "mac0307",
    "projectName": "dummy-function"
  },
  "command": "deploy",
  "args": "-t ./test/singleFunc/grayscale/s-lineStep-interval-undefined.yaml --use-local",
  "argsObj": [
    "-t",
    "./test/singleFunc/grayscale/s-lineStep-interval-undefined.yaml",
    "--use-local"
  ],
  "path": {
    "configPath": "/Users/nanxuanli/work/plugin/fc-canary/test/singleFunc/grayscale/s-lineStep-interval-undefined.yaml"
  },
  "output": {
    "region": "cn-hangzhou",
    "service": {
      "name": "dummy-service"
    },
    "function": {
      "name": "dummy-function",
      "runtime": "nodejs12",
      "handler": "index.handler",
      "memorySize": 1024,
      "timeout": 60
    },
    "url": {
      "custom_domain": [
        {
          "domain": "http://dummy-function.dummy-service.1816647648916833.cn-hangzhou.fc.devsapp.net"
        }
      ]
    },
    "triggers": [
      {
        "type": "http",
        "name": "httpTrigger"
      }
    ]
  }
}
args params: {
  alias: stable;
  canaryStep: [object Object];
}
keys in args: alias,canaryStep
[ 'canaryStep' ]
canaryStep
[2022-04-22 07:57:09] [INFO] [S-CORE] - End the after-action
[J[1mdummy-function: [22m
  [1mregion: [22m  cn-hangzhou
  [1mservice: [22m
    [1mname: [22mdummy-service
  [1mfunction: [22m
    [1mname: [22m      dummy-function
    [1mruntime: [22m   nodejs12
    [1mhandler: [22m   index.handler
    [1mmemorySize: [22m[34m1024[39m
    [1mtimeout: [22m   [34m60[39m
  [1murl: [22m
    [1mcustom_domain: [22m
      [32m- [39m
        [1mdomain: [22mhttp://dummy-function.dummy-service.1816647648916833.cn-hangzhou.fc.devsapp.net
  [1mtriggers: [22m
    [32m- [39m
      [1mtype: [22mhttp
      [1mname: [22mhttpTrigger

- Ensuring nas dir...

There is auto config in the service: _FC_NAS_dummy-service-ensure-nas-dir-exist-service

There is auto config in the service: dummy-service

Tips for next step
======================
* Display information of the deployed resource: s info
* Display metrics: s metrics
* Display logs: s logs
* Invoke remote function: s invoke
* Remove Service: s remove service
* Remove Function: s remove function
* Remove Trigger: s remove trigger
* Remove CustomDomain: s remove domain



[2022-04-22 07:57:20] [INFO] [S-CORE] - Start the after-action
[2022-04-22 07:57:20] [INFO] [S-CORE] - Action: /Users/nanxuanli/work/plugin/fc-canary
{
  "endpoint": "1816647648916833.cn-hangzhou.fc.aliyuncs.com",
  "accessKeyId": "LTAI5tG35imRmNd5xbWfZhEM",
  "accessKeySecret": "IhbevfXalCPsdIOgZfEAS5HQ4VMHiu",
  "regionId": "cn-hangzhou"
}
inputs params without credentials: {
  "props": {
    "region": "cn-hangzhou",
    "service": {
      "name": "dummy-service",
      "logConfig": "auto",
      "nasConfig": "auto"
    },
    "function": {
      "handler": "index.handler",
      "instanceType": "e1",
      "memorySize": 1024,
      "runtime": "nodejs12",
      "timeout": 60,
      "name": "dummy-function",
      "codeUri": "."
    },
    "triggers": [
      {
        "name": "httpTrigger",
        "type": "http",
        "config": {
          "authType": "anonymous",
          "methods": [
            "GET"
          ]
        }
      }
    ],
    "customDomains": [
      {
        "domainName": "auto",
        "protocol": "HTTP",
        "routeConfigs": [
          {
            "path": "/*"
          }
        ]
      }
    ]
  },
  "credentials": {
    "Alias": "mac0307",
    "AccessKeyID": "LTAI5tG35imRmNd5xbWfZhEM",
    "AccessKeySecret": "IhbevfXalCPsdIOgZfEAS5HQ4VMHiu",
    "AccountID": "1816647648916833"
  },
  "appName": "demo-app",
  "project": {
    "component": "devsapp/fc",
    "access": "mac0307",
    "projectName": "dummy-function"
  },
  "command": "deploy",
  "args": "-t ./test/singleFunc/grayscale/s-lineStep-weight-illegal.yaml --use-local",
  "argsObj": [
    "-t",
    "./test/singleFunc/grayscale/s-lineStep-weight-illegal.yaml",
    "--use-local"
  ],
  "path": {
    "configPath": "/Users/nanxuanli/work/plugin/fc-canary/test/singleFunc/grayscale/s-lineStep-weight-illegal.yaml"
  },
  "output": {
    "region": "cn-hangzhou",
    "service": {
      "name": "dummy-service"
    },
    "function": {
      "name": "dummy-function",
      "runtime": "nodejs12",
      "handler": "index.handler",
      "memorySize": 1024,
      "timeout": 60
    },
    "url": {
      "custom_domain": [
        {
          "domain": "http://dummy-function.dummy-service.1816647648916833.cn-hangzhou.fc.devsapp.net"
        }
      ]
    },
    "triggers": [
      {
        "type": "http",
        "name": "httpTrigger"
      }
    ]
  }
}
args params: {
  alias: stable;
  canaryStep: [object Object];
}
keys in args: alias,canaryStep
[ 'canaryStep' ]
canaryStep
âœ– Message:

ERROR:

grayscale strategy: canaryStep can't have a weight > 100, current weight: 110

TraceId:     acde480011221650614241001
Environment: @serverless-devs/s: 2.0.104, core: 0.1.34, s-home: /Users/nanxuanli/.s, darwin-x64, node-v17.7.1
Documents:   https://www.serverless-devs.com
Discussions: https://github.com/Serverless-Devs/Serverless-Devs/discussions
Issues:      https://github.com/Serverless-Devs/Serverless-Devs/issues

Please copy traceId: acde480011221650614241001 and join Dingding group: 33947367 for consultation.
You can run 's clean --all' to clean Serverless devs.

- Ensuring nas dir...

There is auto config in the service: _FC_NAS_dummy-service-ensure-nas-dir-exist-service

There is auto config in the service: dummy-service

Tips for next step
======================
* Display information of the deployed resource: s info
* Display metrics: s metrics
* Display logs: s logs
* Invoke remote function: s invoke
* Remove Service: s remove service
* Remove Function: s remove function
* Remove Trigger: s remove trigger
* Remove CustomDomain: s remove domain



[2022-04-22 07:57:32] [INFO] [S-CORE] - Start the after-action
[2022-04-22 07:57:32] [INFO] [S-CORE] - Action: /Users/nanxuanli/work/plugin/fc-canary
{
  "endpoint": "1816647648916833.cn-hangzhou.fc.aliyuncs.com",
  "accessKeyId": "LTAI5tG35imRmNd5xbWfZhEM",
  "accessKeySecret": "IhbevfXalCPsdIOgZfEAS5HQ4VMHiu",
  "regionId": "cn-hangzhou"
}
inputs params without credentials: {
  "props": {
    "region": "cn-hangzhou",
    "service": {
      "name": "dummy-service",
      "logConfig": "auto",
      "nasConfig": "auto"
    },
    "function": {
      "handler": "index.handler",
      "instanceType": "e1",
      "memorySize": 1024,
      "runtime": "nodejs12",
      "timeout": 60,
      "name": "dummy-function",
      "codeUri": "."
    },
    "triggers": [
      {
        "name": "httpTrigger",
        "type": "http",
        "config": {
          "authType": "anonymous",
          "methods": [
            "GET"
          ]
        }
      }
    ],
    "customDomains": [
      {
        "domainName": "auto",
        "protocol": "HTTP",
        "routeConfigs": [
          {
            "path": "/*"
          }
        ]
      }
    ]
  },
  "credentials": {
    "Alias": "mac0307",
    "AccessKeyID": "LTAI5tG35imRmNd5xbWfZhEM",
    "AccessKeySecret": "IhbevfXalCPsdIOgZfEAS5HQ4VMHiu",
    "AccountID": "1816647648916833"
  },
  "appName": "demo-app",
  "project": {
    "component": "devsapp/fc",
    "access": "mac0307",
    "projectName": "dummy-function"
  },
  "command": "deploy",
  "args": "-t ./test/singleFunc/grayscale/s-lineStep-weight-miss.yaml --use-local",
  "argsObj": [
    "-t",
    "./test/singleFunc/grayscale/s-lineStep-weight-miss.yaml",
    "--use-local"
  ],
  "path": {
    "configPath": "/Users/nanxuanli/work/plugin/fc-canary/test/singleFunc/grayscale/s-lineStep-weight-miss.yaml"
  },
  "output": {
    "region": "cn-hangzhou",
    "service": {
      "name": "dummy-service"
    },
    "function": {
      "name": "dummy-function",
      "runtime": "nodejs12",
      "handler": "index.handler",
      "memorySize": 1024,
      "timeout": 60
    },
    "url": {
      "custom_domain": [
        {
          "domain": "http://dummy-function.dummy-service.1816647648916833.cn-hangzhou.fc.devsapp.net"
        }
      ]
    },
    "triggers": [
      {
        "type": "http",
        "name": "httpTrigger"
      }
    ]
  }
}
args params: {
  alias: stable;
  canaryStep: [object Object];
}
keys in args: alias,canaryStep
[ 'canaryStep' ]
canaryStep
âœ– Message:

ERROR:

Weight is required, grayscale strategy: canaryStep

TraceId:     acde480011221650614253384
Environment: @serverless-devs/s: 2.0.104, core: 0.1.34, s-home: /Users/nanxuanli/.s, darwin-x64, node-v17.7.1
Documents:   https://www.serverless-devs.com
Discussions: https://github.com/Serverless-Devs/Serverless-Devs/discussions
Issues:      https://github.com/Serverless-Devs/Serverless-Devs/issues

Please copy traceId: acde480011221650614253384 and join Dingding group: 33947367 for consultation.
You can run 's clean --all' to clean Serverless devs.

- Ensuring nas dir...

There is auto config in the service: _FC_NAS_dummy-service-ensure-nas-dir-exist-service

There is auto config in the service: dummy-service

Tips for next step
======================
* Display information of the deployed resource: s info
* Display metrics: s metrics
* Display logs: s logs
* Invoke remote function: s invoke
* Remove Service: s remove service
* Remove Function: s remove function
* Remove Trigger: s remove trigger
* Remove CustomDomain: s remove domain



[2022-04-22 07:57:44] [INFO] [S-CORE] - Start the after-action
[2022-04-22 07:57:44] [INFO] [S-CORE] - Action: /Users/nanxuanli/work/plugin/fc-canary
{
  "endpoint": "1816647648916833.cn-hangzhou.fc.aliyuncs.com",
  "accessKeyId": "LTAI5tG35imRmNd5xbWfZhEM",
  "accessKeySecret": "IhbevfXalCPsdIOgZfEAS5HQ4VMHiu",
  "regionId": "cn-hangzhou"
}
inputs params without credentials: {
  "props": {
    "region": "cn-hangzhou",
    "service": {
      "name": "dummy-service",
      "logConfig": "auto",
      "nasConfig": "auto"
    },
    "function": {
      "handler": "index.handler",
      "instanceType": "e1",
      "memorySize": 1024,
      "runtime": "nodejs12",
      "timeout": 60,
      "name": "dummy-function",
      "codeUri": "."
    },
    "triggers": [
      {
        "name": "httpTrigger",
        "type": "http",
        "config": {
          "authType": "anonymous",
          "methods": [
            "GET"
          ]
        }
      }
    ],
    "customDomains": [
      {
        "domainName": "auto",
        "protocol": "HTTP",
        "routeConfigs": [
          {
            "path": "/*"
          }
        ]
      }
    ]
  },
  "credentials": {
    "Alias": "mac0307",
    "AccessKeyID": "LTAI5tG35imRmNd5xbWfZhEM",
    "AccessKeySecret": "IhbevfXalCPsdIOgZfEAS5HQ4VMHiu",
    "AccountID": "1816647648916833"
  },
  "appName": "demo-app",
  "project": {
    "component": "devsapp/fc",
    "access": "mac0307",
    "projectName": "dummy-function"
  },
  "command": "deploy",
  "args": "-t ./test/singleFunc/grayscale/s-2-grayscale-strategies.yaml --use-local",
  "argsObj": [
    "-t",
    "./test/singleFunc/grayscale/s-2-grayscale-strategies.yaml",
    "--use-local"
  ],
  "path": {
    "configPath": "/Users/nanxuanli/work/plugin/fc-canary/test/singleFunc/grayscale/s-2-grayscale-strategies.yaml"
  },
  "output": {
    "region": "cn-hangzhou",
    "service": {
      "name": "dummy-service"
    },
    "function": {
      "name": "dummy-function",
      "runtime": "nodejs12",
      "handler": "index.handler",
      "memorySize": 1024,
      "timeout": 60
    },
    "url": {
      "custom_domain": [
        {
          "domain": "http://dummy-function.dummy-service.1816647648916833.cn-hangzhou.fc.devsapp.net"
        }
      ]
    },
    "triggers": [
      {
        "type": "http",
        "name": "httpTrigger"
      }
    ]
  }
}
args params: {
  alias: stable;
  canaryStep: [object Object];
  canaryPlans: [object Object],[object Object];
}
keys in args: alias,canaryStep,canaryPlans
[ 'canaryStep', 'canaryPlans' ]
âœ– Message:

ERROR:

Choose at most one grayscale strategy! You chose 2 strategies

TraceId:     acde480011221650614265664
Environment: @serverless-devs/s: 2.0.104, core: 0.1.34, s-home: /Users/nanxuanli/.s, darwin-x64, node-v17.7.1
Documents:   https://www.serverless-devs.com
Discussions: https://github.com/Serverless-Devs/Serverless-Devs/discussions
Issues:      https://github.com/Serverless-Devs/Serverless-Devs/issues

Please copy traceId: acde480011221650614265664 and join Dingding group: 33947367 for consultation.
You can run 's clean --all' to clean Serverless devs.

- Ensuring nas dir...

There is auto config in the service: _FC_NAS_dummy-service-ensure-nas-dir-exist-service

There is auto config in the service: dummy-service

Tips for next step
======================
* Display information of the deployed resource: s info
* Display metrics: s metrics
* Display logs: s logs
* Invoke remote function: s invoke
* Remove Service: s remove service
* Remove Function: s remove function
* Remove Trigger: s remove trigger
* Remove CustomDomain: s remove domain



[2022-04-22 07:57:57] [INFO] [S-CORE] - Start the after-action
[2022-04-22 07:57:57] [INFO] [S-CORE] - Action: /Users/nanxuanli/work/plugin/fc-canary
{
  "endpoint": "1816647648916833.cn-hangzhou.fc.aliyuncs.com",
  "accessKeyId": "LTAI5tG35imRmNd5xbWfZhEM",
  "accessKeySecret": "IhbevfXalCPsdIOgZfEAS5HQ4VMHiu",
  "regionId": "cn-hangzhou"
}
inputs params without credentials: {
  "props": {
    "region": "cn-hangzhou",
    "service": {
      "name": "dummy-service",
      "logConfig": "auto",
      "nasConfig": "auto"
    },
    "function": {
      "handler": "index.handler",
      "instanceType": "e1",
      "memorySize": 1024,
      "runtime": "nodejs12",
      "timeout": 60,
      "name": "dummy-function",
      "codeUri": "."
    },
    "triggers": [
      {
        "name": "httpTrigger",
        "type": "http",
        "config": {
          "authType": "anonymous",
          "methods": [
            "GET"
          ]
        }
      }
    ],
    "customDomains": [
      {
        "domainName": "auto",
        "protocol": "HTTP",
        "routeConfigs": [
          {
            "path": "/*"
          }
        ]
      }
    ]
  },
  "credentials": {
    "Alias": "mac0307",
    "AccessKeyID": "LTAI5tG35imRmNd5xbWfZhEM",
    "AccessKeySecret": "IhbevfXalCPsdIOgZfEAS5HQ4VMHiu",
    "AccountID": "1816647648916833"
  },
  "appName": "demo-app",
  "project": {
    "component": "devsapp/fc",
    "access": "mac0307",
    "projectName": "dummy-function"
  },
  "command": "deploy",
  "args": "-t ./test/singleFunc/grayscale/s-canaryweight-weight-illegal.yaml --use-local",
  "argsObj": [
    "-t",
    "./test/singleFunc/grayscale/s-canaryweight-weight-illegal.yaml",
    "--use-local"
  ],
  "path": {
    "configPath": "/Users/nanxuanli/work/plugin/fc-canary/test/singleFunc/grayscale/s-canaryweight-weight-illegal.yaml"
  },
  "output": {
    "region": "cn-hangzhou",
    "service": {
      "name": "dummy-service"
    },
    "function": {
      "name": "dummy-function",
      "runtime": "nodejs12",
      "handler": "index.handler",
      "memorySize": 1024,
      "timeout": 60
    },
    "url": {
      "custom_domain": [
        {
          "domain": "http://dummy-function.dummy-service.1816647648916833.cn-hangzhou.fc.devsapp.net"
        }
      ]
    },
    "triggers": [
      {
        "type": "http",
        "name": "httpTrigger"
      }
    ]
  }
}
args params: {
  alias: stable;
  canaryWeight: -1;
}
keys in args: alias,canaryWeight
[ 'canaryWeight' ]
canaryWeight
âœ– Message:

ERROR:

canaryWeight can't have a weight <= 0, current weight: -1

TraceId:     acde480011221650614278049
Environment: @serverless-devs/s: 2.0.104, core: 0.1.34, s-home: /Users/nanxuanli/.s, darwin-x64, node-v17.7.1
Documents:   https://www.serverless-devs.com
Discussions: https://github.com/Serverless-Devs/Serverless-Devs/discussions
Issues:      https://github.com/Serverless-Devs/Serverless-Devs/issues

Please copy traceId: acde480011221650614278049 and join Dingding group: 33947367 for consultation.
You can run 's clean --all' to clean Serverless devs.

