edition: 1.0.0 #  命令行YAML规范版本，遵循语义化版本（Semantic Versioning）规范
name: demo-app #  项目名称
access: 'mac0307' #  秘钥别名


services:
  dummy-function:
    component: devsapp/fc
    actions:
      post-deploy: # 在deploy之后运行
        - plugin: ${path(../..)}
          args:
            notification:
              dingding: https://oapi.dingtalk.com/robot/send?access_token=a14a4e93ebd5eb5c82de8817481e44dcfae5a484b17efbf05d3d7238e05de0bb
            alias: test6
            #            baseVersion: 5
            description: '1231xx23'
            #            service: xxx
            canaryStep:
              weight: 40
    #              interval: 1
    #            canaryWeight:  10 #手动灰度，指定时直接将灰度版本设置对应的权重
    #            canaryPlans: #自定义灰度
    #              - weight: 1
    #                interval: 1
    #              - weight: 30
    #                interval: 1
    #              - weight: 40
    #                interval: 1
    #            linearStep:
    #                weight: 40
    #                interval: 1
    props:
      region: cn-hangzhou
      service:
        name: preProd1
        logConfig: auto
        nasConfig: auto
      function:
        handler: index.handler
        instanceType: e1
        memorySize: 1024
        runtime: nodejs12
        timeout: 60
        name: dummy-function
        codeUri: ./code
      triggers:
        - name: httpTrigger
          type: http
          config:
            authType: anonymous
            methods:
              - GET
      customDomains:
        - domainName: auto
          protocol: HTTP
          routeConfigs:
            - path: '/*'
        - domainName: wordpress.web-framework.1816647648916833.cn-hangzhou.fc.devsapp.net
          protocol: HTTP
          routeConfigs:
            - path: '/index'
              serviceName: preProd1
              functionName: dummy-function
            - path: '/cat'
              serviceName: test-fully
              functionName: dummy-function





